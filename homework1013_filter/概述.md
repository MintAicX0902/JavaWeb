### 实现概述：

该代码包含三个组件：**LoginFilter**、**LoginServlet** 和 **LogoutServlet**。它们共同为 Java Web 应用程序提供了一个基本的用户认证机制，使用了 **Servlets** 和 **HTTP 会话**。以下是每个部分的概述：

1. **LoginFilter** (`LoginFilter.java`)：
   - **目的**：该过滤器确保用户必须在访问受保护的资源之前进行身份验证。它通过会话检查用户是否已登录，只有登录后才能访问。
   - **主要逻辑**：
     - 如果请求的 URI 属于 **排除路径**（例如 `/login`、`/doLogin` 或静态资源如 `/css/`、`/js/`），则过滤器无需身份验证即可让请求通过。
     - 对于其他请求，它会检查是否存在包含用户属性的活动会话。如果用户已通过身份验证，请求将继续处理；否则，用户将被重定向到登录页面 (`/login.jsp`)。
   - **辅助方法**：`isExcluded()` 方法检查请求的路径是否在排除列表中，确保诸如静态资源或登录页面等路径无需登录即可访问。

2. **LoginServlet** (`LoginServlet.java`)：
   - **目的**：该 Servlet 通过验证用户名和密码来处理用户的登录请求。
   - **主要逻辑**：
     - 从登录表单中获取凭据（`username` 和 `password`）。
     - 如果提供的凭据与硬编码的值（即 `admin` 和 `123456`）匹配，则创建一个新的会话并设置用户属性，表示登录成功。然后将用户重定向到主页 (`/home.jsp`)。
     - 如果身份验证失败，则将错误消息添加到请求中，并将用户转发到失败页面 (`fail.jsp`)。

3. **LogoutServlet** (`LogoutServlet.java`)：
   - **目的**：该 Servlet 通过使当前会话失效来处理注销功能，从而结束用户的登录状态。
   - **主要逻辑**：
     - 当访问注销 URL (`/logout`) 时，检查是否存在会话，如果存在则使其失效。
     - 然后将用户重定向到登录页面 (`/login.jsp`) 以允许重新登录。

### 附加功能：

1. **会话管理**：
   - 会话用于跟踪用户是否已登录。当用户登录时，其用户名会被存储在会话中 (`session.setAttribute("user", username)`)，过滤器通过此属性判断用户的身份验证状态。
   - 过滤器确保高效的会话管理，如果不需要会话则不会创建 (`httpRequest.getSession(false)`)。

2. **静态资源的路径排除**：
   - 过滤器为诸如 `/public`、`/css/`、`/js/` 和 `/images/` 之类的路径使用了 **排除列表**。这使得静态资源可以在不需要登录的情况下自由访问，对于用户体验至关重要（例如加载样式表或 JavaScript）。

3. **错误处理和用户反馈**：
   - 如果登录失败，Servlet 会设置一个 `errorMsg` 属性并转发到 `fail.jsp`，以便向用户提供反馈。这样可以改善用户体验，让用户知道为什么登录尝试失败。

4. **安全重定向**：
   - 当需要时，用户将被重定向到登录页面，并使用 `contextPath` 来动态维护应用程序上下文，从而使代码在不同环境中更健壮和安全。

### 总结：

该实现提供了一个 **简单而有效的认证系统**，使用过滤器保护资源，使用 Servlet 处理登录和注销逻辑，并通过会话来维护用户状态。LoginFilter 有效地保护了所有资源，除了明确排除的部分，确保未经认证的用户被重定向到登录页面。Servlet 负责登录验证和用户注销，同时妥善管理会话属性。
